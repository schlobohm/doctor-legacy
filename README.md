# doctor

A tool to capture an "analytics snapshot" of the `schlobohm.one` infrastructure. [In case the Reds decide to push the button down](https://youtu.be/yi4hbVAfRCw).

## Installation

```bash
sudo git clone https://github.com/schlobohm/doctor.git /opt/doctor && sudo ln -s /opt/doctor/doctor.sh /usr/local/bin/doctor && sudo chmod a+x /usr/local/bin/doctor
```

## Running

By default, you can run doctor by simply executing the `doctor` command.

Unless instructed otherwise, doctor will create a directory at `$HOME/sbone-doctor/[timestamp]` each run and put reports inside that folder. The timestamp is generated by running `date +'%Y%m%d_%H%M%S'`.

### Specifying a base directory

If you wish to manually specify a base output directory, you can override the `OUTPUTDIR` shell variable. Note that there will still be a timestamped directory inside the base directory.

```bash
BASEDIR="/var/log/doctor-reports" doctor
```

### Specifying an output directory (for individual runs)

If you wish to manually specify an output directory (that is, **for one individual run**), you can override the `OUTPUTDIR` shell variable.

```bash
OUTPUTDIR="/var/log/misc/doctor-2022_01_01_at_09_00" doctor
```

## Updating

```bash
doctor update
```

## Uninstalling

```bash
sudo rm /usr/local/bin/doctor && sudo rm -rf /opt/doctor
```
